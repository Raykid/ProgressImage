var utils;(function(utils){function changeProperty(obj,key,attrs){var target=obj;while(true){if(target==null)return obj;if(target.hasOwnProperty(key))break;target=typeof target=="function"?target.prototype:target["__proto__"]}var oriAttrs=Object.getOwnPropertyDescriptor(target,key);Object.defineProperty(target,key,attrs);Object.defineProperty(target,"$"+key,{configurable:oriAttrs.configurable,enumerable:oriAttrs.enumerable,get:function(){Object.defineProperty(target,key,oriAttrs);var res=this[key];Object.defineProperty(target,key,attrs);return res},set:function(value){Object.defineProperty(target,key,oriAttrs);this[key]=value;Object.defineProperty(target,key,attrs)}})}utils.changeProperty=changeProperty})(utils||(utils={}));(function(){utils.changeProperty(HTMLImageElement,"src",{enumerable:true,configurable:true,get:function(){return this.__oriSrc},set:function(value){this.__oriSrc=value;var self=this;var protocol=value.substring(0,value.indexOf(":"));if(protocol=="http"||protocol=="https"||protocol==""){if(this._xhr==null){this._xhr=new XMLHttpRequest;this._xhr.responseType="arraybuffer";this._xhr.onabort=middleListener;this._xhr.onerror=middleListener;this._xhr.onloadend=middleListener;this._xhr.onloadstart=middleListener;this._xhr.onprogress=middleListener;this._xhr.ontimeout=middleListener;this._xhr.onload=function(){var blob=new Blob([self._xhr.response]);var url=URL.createObjectURL(blob);self.$src=url;setTimeout(URL.revokeObjectURL,0,url)}}if(this._xhr.status!=XMLHttpRequest.UNSENT)this._xhr.abort();this._xhr.open("GET",value,true);this._xhr.send()}else{this.$src=value}function middleListener(evt){var newEvt=document.createEvent("Event");newEvt.initEvent(evt.type,evt.bubbles,evt.cancelable);newEvt.lengthComputable=evt.lengthComputable;newEvt.loaded=evt.loaded;newEvt.total=evt.total;self.dispatchEvent(newEvt)}}})})();